openapi: 3.0.0
info:
  title: npa_publisher
  description: NPA publisher CRUD operations.
  version: 1.0.1
components:
  schemas:
    publisher_post_request:
      type: object
      required:
        - name
      x-speakeasy-entity: NPAPublishers
      x-speakeasy-entity-description: |
        The NPA Publisher is a software package that enables private application
        connectivity between your data center and the Netskope cloud. It is a crucial 
        component of Netskope’s Private Access (NPA) solution, which provides zero-trust 
        network access (ZTNA) to private applications and data in hybrid IT environments.

        This resource supports the creation of the Publisher objects.

        Features may require additional licensing, please work with account team to enable.
      properties:
        name:
          description: The name of the Publisher as seen in the UI
          type: string
          example: npa_publisher_1
        lbrokerconnect:
          description: Allow this publisher to be stitched to Local Broker
          type: boolean
          default: false
## removing tags as they are not supported with publishers
#        tags:
#          x-speakeasy-ignore: true
#          type: array
#          items:
#            $ref: "#/components/schemas/tag_item_no_id"
        publisher_upgrade_profiles_id:
          description: The ID of the upgrade profile to manage this publisher
          type: integer
          format: int32
          default: 1
          example: 1
## removing tags as they are not supported with publishers.        
#    tag_item_no_id:
#      type: object
#      properties:
#        tag_name:
#          type: string
#          default: tag_name
#    tag_item:
#      type: object
#      properties:
#        tag_id:
#          type: integer
#          format: int32
#        tag_name:
#          type: string
    release_item:
      type: object
      properties:
        docker_tag:
          type: string
        name:
          type: string
        version:
          type: string
    publisher_put_request:
      type: object
      required:
        - id
      properties:
        name:
          type: string
        id:
          type: integer
          format: int32
        lbrokerconnect:
          type: boolean
        publisher_upgrade_profiles_id:
          type: integer
          format: int32
    publisher_patch_request:
      type: object
      required:
        - name
      x-speakeasy-entity: NPAPublishers
      properties:
        name:
          type: string
        id:
          type: integer
          format: int32
        lbrokerconnect:
          type: boolean
        publisher_upgrade_profiles_id:
          type: integer
          format: int32
## removing tags as they are not supported by publishers
#        tags:
#          type: array
#          items:
#            $ref: "#/components/schemas/tag_item"
    publisher_response:
      type: object
      properties:
        status:
          x-speakeasy-ignore: true
          type: string
          enum:
            - success
            - not found
        data:
          type: object
          x-speakeasy-entity: NPAPublishers
          properties:
            id:
              x-speakeasy-name-override: publisher_id
              type: integer
              format: int32
            name:
              type: string
            common_name:
              type: string
            registered:
              type: boolean
            lbrokerconnect:
              type: boolean
            assessment:
              x-speakeasy-type-override: any
              type: object
            stitcher_id:
              type: integer
              format: int32
            status:
              type: string
              enum:
                - connected
                - not registered
            publisher_upgrade_profile_id:
              type: integer
              format: int32
## removing tags as they are not currently supported by publishers
#            tags:
#              type: array
#              items:
#                $ref: "#/components/schemas/tag_item"
    publishers_response_400:
      type: object
      properties:
        status:
          type: integer
          example: 400
        result:
          type: string
    publishers_get_response:
      type: object
      x-speakeasy-entity: NPAPublishersList
      x-speakeasy-description: |
        The NPA Publisher is a software package that enables private application
        connectivity between your data center and the Netskope cloud. It is a crucial 
        component of Netskope’s Private Access (NPA) solution, which provides zero-trust 
        network access (ZTNA) to private applications and data in hybrid IT environments.

        This data source supports the list of all Publisher objects.

        Features may require additional licensing, please work with account team to enable.
      properties:
        data:
          $ref: "#/components/schemas/Data"
        status:
          type: string
        total:
          type: integer
          format: int32
    Data:
      type: object
      additionalProperties: false
      properties:
        publishers:
          type: array
          items:
            $ref: "#/components/schemas/Publisher"
      required:
        - publishers
      title: Data
    Publisher:
      type: object
      additionalProperties: false
      properties:
        apps_count:
          type: integer
        assessment:
          anyOf:
            - $ref: "#/components/schemas/Assessment"
            - type: object
        common_name:
          type: string
        connected_apps:
          anyOf:
            - type: array
              items:
                type: string
        lbrokerconnect:
          type: boolean
        publisher_id:
          type: integer
        publisher_name:
          type: string
        publisher_upgrade_profiles_external_id:
          type: integer
        registered:
          type: boolean
        status:
          type: string
        stitcher_id:
          type: integer
## removing tags as they are not supported by publishers today
#        tags:
#          type: array
#          items: {}
        upgrade_failed_reason:
          anyOf:
            - $ref: "#/components/schemas/UpgradeFailedReason"
            - type: object
        upgrade_request:
          type: boolean
        upgrade_status:
          $ref: "#/components/schemas/UpgradeStatus"
      required:
        - apps_count
        - assessment
        - common_name
        - connected_apps
        - lbrokerconnect
        - publisher_id
        - publisher_name
        - publisher_upgrade_profiles_external_id
        - registered
        - status
        - stitcher_id
## removing tags as they are not supported with publishers
#        - tags
        - upgrade_failed_reason
        - upgrade_request
        - upgrade_status
      title: Publisher
    Assessment:
      type: object
      additionalProperties: false
      properties:
        eee_support:
          type: boolean
        hdd_free:
          type: string
        hdd_total:
          type: string
        ip_address:
          type: string
        latency:
          type: integer
        version:
          type: string
      required:
        - eee_support
        - hdd_free
        - hdd_total
        - ip_address
        - latency
        - version
      title: Assessment
    UpgradeFailedReason:
      type: object
      additionalProperties: false
      properties:
        detail:
          type: string
        error_code:
          type: integer
        timestamp:
          type: integer
        version:
          type: string
          format: integer
      required:
        - detail
        - error_code
        - timestamp
        - version
      title: UpgradeFailedReason
    UpgradeStatus:
      type: object
      additionalProperties: false
      properties:
        upstat:
          type: string
      required:
        - upstat
      title: UpgradeStatus
## Not referenced removed
#    publisher_bulk_item:
#      type: object
#      properties:
#        id:
#          type: integer
#          format: int32
#        name:
#          type: string
#        common_name:
#          type: string
#        registered:
#          type: boolean
#        lbrokerconnect:
#          type: boolean
#        assessment:
#          type: object
#        upgrade_failed_reason:
#          type: object
#        upgrade_request:
#          type: boolean
#        upgrade_status:
#          type: object
#        stitcher_id:
#          type: integer
#          format: int32
#        status:
#          type: string
#          enum:
#            - connected
#            - not registered
#          publisher_upgrade_profile_id:
#            type: integer
#            format: int32
## removing tags as they are not supported by publishers today
#        tags:
#          type: array
#          items:
#            $ref: "#/components/schemas/tag_item"
    publisher_bulk_request:
      type: object
      x-speakeasy-entity: NPAPublishersBulkUpgrade
      properties:
        publishers:
          type: object
          properties:
            id:
              type: array
              items:
                type: string
            apply:
              type: object
              properties:
                upgrade_request:
                  type: boolean
                  default: true
    publishers_bulk_response:
      type: object
      x-speakeasy-entity: NPAPublishersBulkUpgrade
      properties:
        status:
          type: string
          enum:
            - success
            - not found
        data:
          type: object
          properties:
            publishers:
              type: array
              items:
                type: object
                properties:
                  apps_count:
                    type: integer
                    format: int32
                  assessment:
                    type: object
                    additionalProperties: false
                  capabilities:
                    type: object
                    additionalProperties: false                    
                  common_name:
                    type: string
                  connected_apps:
                    type: array
                    items:
                      type: string
                  id:
                    type: integer
                    format: int32
                  lbrokerconnect:
                    type: boolean
                  name:
                    type: string
                  publisher_upgrade_profiles_id:
                    type: integer
                    format: int32
                  registered:
                    type: boolean
                  status:
                    type: string
                  stitcher_id:
                    type: integer
                    format: int32
                  stitcher_pop:
                    type: string
#                  tags:
#                    type: array
#                    items:
#                      type: object
                  upgrade_failed_reason:
                    type: object
                    additionalProperties: false                     
                  upgrade_request:
                    type: boolean
                  upgrade_status:
                    type: object
                    properties:
                      upstat:
                        type: string
    publishers_alert_get_response:
      type: object
      properties:
        status:
          x-speakeasy-ignore: true
          type: string
          enum:
            - success
            - not found
        data:
          type: object
          x-speakeasy-entity:
            - NPAPublishersAlertsConfigurationList
          properties:
            adminUsers:
              type: array
              items:
                type: string
                example:
                  - admin1@abc.com
                  - admin2@abc.com
            eventTypes:
              type: array
              items:
                type: string
                enum:
                  - UPGRADE_WILL_START
                  - UPGRADE_STARTED
                  - UPGRADE_SUCCEEDED
                  - UPGRADE_FAILED
                  - CONNECTION_FAILED
              example:
                - CONNECTION_FAILED
                - UPGRADE_STARTED
            selectedUsers:
              type: string # Should be an array of strings,
              example: abc@xyz.com,def@xyz.com
    publishers_alert_put_request:
      type: object
      x-speakeasy-entity:
        - NPAPublishersAlertsConfigurationUpdate
      properties:
        adminUsers:
          type: array
          items:
            type: string
            example:
              - admin1@abc.com
              - admin2@abc.com
        eventTypes:
          type: array
          items:
            type: string
            enum:
              - UPGRADE_WILL_START
              - UPGRADE_STARTED
              - UPGRADE_SUCCEEDED
              - UPGRADE_FAILED
              - CONNECTION_FAILED
          minItems: 1
          maxItems: 5
          example:
            - CONNECTION_FAILED
            - UPGRADE_STARTED
        selectedUsers:
          type: string
          example: abc@xyz.com,def@xyz.com
## merged into response above for compile problems.
#    publishers_alert_put_response:
#      type: object
#      properties:
#        status:
#          type: string
#          enum:
#            - success
#            - not found
#            - failure
    publishers_release_get_response:
      type: object
      x-speakeasy-entity: NPAPublishersReleasesList
      properties:
        status:
          type: string
          enum:
            - success
            - not found
        data:
          type: array
          items:
            $ref: "#/components/schemas/release_item"
## Merged into response item above to address compile problems
#    protocol_response_item:
#      type: object
#      properties:
#        created_at:
#          type: string
#        id:
#          type: integer
#          format: int32
#        port:
#          type: string
#        service_id:
#          type: integer
#          format: int32
#        transport:
#          type: string
#        updated_at:
#          type: string
#    service_publisher_assignment_item:
#      type: object
#      properties:
#        primary:
#          type: string
#        publisher_external_id:
#          type: integer
#          format: int32
#        publisher_name:
#          type: string
#        reachability:
#          type: string
#        service_exernal_id:
#          type: integer
#          format: int32
    publisher_apps_list_response:
      type: object
      x-speakeasy-entity: NPAPublishersAppsList
      properties:
        status:
          type: string
          enum:
            - success
            - not found
        data:
          type: array
          items:
            type: object
            properties:
              allow_unauthenticated_cors:
                type: boolean
              app_option:
                type: object
              clientless_access:
                type: boolean
              external_id:
                type: integer
                format: int32
              host:
                type: string
              id:
                type: number
              is_user_portal_app:
                type: boolean
              name:
                type: string
              private_app_protocol:
                type: string
              protocols:
                type: array
                items:
### explicity defined schema versus reference to permit terraform to work.
#                  $ref: "#/components/schemas/protocol_response_item"
                  type: object
                  properties:
                    created_at:
                      type: string
                    id: 
                      type: integer
                      format: int32
                    port:
                      type: string
                    service_id: 
                      type: integer
                      format: int32
                    transport:
                      type: string
                    updated_at:
                      type: string
              public_host:
                type: string
              reachability:
                type: object
                properties:
                  reachable:
                    type: boolean
              real_host:
                type: string
              service_publisher_assignments:
                type: array
                items:
## explicity defined schema for terraform to compile
#                  $ref: "#/components/schemas/service_publisher_assignment_item"
                  type: object
                  properties:
                    primary:
                      type: boolean
                    publisher_external_id:
                      type: number
                    publisher_name:
                      type: string
                    reachability:
                      type: boolean
                    service_external_id:
                      type: number
              supplement_dns_for_osx:
                type: boolean
              trust_self_signed_certs:
                type: boolean
              use_publisher_dns:
                type: boolean
paths:
  /infrastructure/publishers:
    x-netskope-params:
      serviceConfig: provisioner-pycore-ws
      version: 2
      customerFacing: true
      apiGroup: npa_publishers
    get:
      summary: Get list of publisher objects
      description: |
        The NPA Publisher is a software package that enables private application
        connectivity between your data center and the Netskope cloud. It is a crucial 
        component of Netskope’s Private Access (NPA) solution, which provides zero-trust 
        network access (ZTNA) to private applications and data in hybrid IT environments.

        This endpoint queries all publishers objects.

        By using the fields parameter, you are able to reduce the attributes in the return.
        
        `?fields = publisher_id,publisher_name`

        Features may require additional licensing, please work with account team to enable.
      operationId: getNPAPublishers
      x-speakeasy-name-override: list_objects
      x-speakeasy-entity-operation: NPAPublishersList#read
      x-speakeasy-group: NPAPublishers
      parameters:
        - name: fields
          x-speakeasy-terraform-ignore: true
          in: query
          required: false
          description: Return values only from specified fields
          schema:
            type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_get_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
    post:
      summary: Create a publisher
      description: |
        The NPA Publisher is a software package that enables private application
        connectivity between your data center and the Netskope cloud. It is a crucial 
        component of Netskope’s Private Access (NPA) solution, which provides zero-trust 
        network access (ZTNA) to private applications and data in hybrid IT environments.

        This resource supports the creation of the Publisher objects.
        Please review the samples provided for minimum, and full schemas. 

        Features may require additional licensing, please work with account team to enable.
      operationId: createNPApublishers
      x-speakeasy-name-override: create
      x-speakeasy-entity-operation: NPAPublishers#create
      x-speakeasy-group: NPAPublishers
      parameters:
        - name: silent
          x-speakeasy-terraform-ignore: true
          in: query
          required: false
          description: flag to skip output except status code
          schema:
            type: string
            enum:
              - "1"
              - "0"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/publisher_post_request"
            examples:
              minimum:
                value:
                  name: npa_publisher_1
              full:
                value:
                  name: npa_publisher_1
                  lbrokerconnect: false
                  publisher_upgrade_profiles_id: 1
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publisher_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
  /infrastructure/publishers/{publisher_id}:
    x-netskope-params:
      serviceConfig: provisioner-pycore-ws
      version: 2
      customerFacing: true
      apiGroup: npa_publishers
    delete:
      summary: Delete a publisher
      description: Delete a publisher based on publisher id
      operationId: deleteNPAPublishers
      x-speakeasy-name-override: delete
      x-speakeasy-entity-operation: NPAPublishers#delete
      x-speakeasy-group: NPAPublishers
      parameters:
        - name: publisher_id
          in: path
          required: true
          description: publisher id
          schema:
            type: integer
            format: int32
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - success
                      - error
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
    put:
      x-speakeasy-terraform-ignore: true
      summary: Update a publisher
      description: update a publisher based on publisher id
      operationId: replaceNPAPublisherById
      parameters:
        - name: publisher_id
          in: path
          required: true
          description: publisher id
          schema:
            type: integer
            format: int32
        - name: silent
          x-speakeasy-terraform-ignore: true
          in: query
          required: false
          description: flag to skip output except status code
          schema:
            type: string
            enum:
              - "1"
              - "0"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/publisher_put_request"
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publisher_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
    patch:
      summary: Patch a publisher
      description: patch a publisher based on publisher id
      operationId: updateNPAPublisherById
      x-speakeasy-name-override: update
      x-speakeasy-entity-operation: NPAPublishers#update
      x-speakeasy-group: NPAPublishers
      parameters:
        - name: publisher_id
          in: path
          required: true
          description: publisher id
          schema:
            type: integer
            format: int32
        - name: silent
          x-speakeasy-terraform-ignore: true
          in: query
          required: false
          description: flag to skip output except status code
          schema:
            type: string
            enum:
              - "1"
              - "0"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/publisher_patch_request"
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publisher_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
    get:
      summary: Get a publisher
      description: get a publisher based on publisher id
      operationId: getNPAPublisherById
      x-speakeasy-name-override: read
      x-speakeasy-entity-operation: NPAPublishers#read
      x-speakeasy-group: NPAPublishers
      parameters:
        - name: publisher_id
          in: path
          required: true
          description: publisher id
          schema:
            type: integer
            format: int32
            example: 1
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publisher_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
  /infrastructure/publishers/{publisher_id}/registration_token:
    x-netskope-params:
      serviceConfig: provisioner-pycore-ws
      version: 2
      customerFacing: true
      apiGroup: npa_publishers
    post:
      summary: Generate and retrieve a token for publisher registration
      description: Generate and retrieve a token for publisher registration
      operationId: generateNPAPublisherToken
      x-speakeasy-name-override: create
      x-speakeasy-entity-operation: PublisherToken#create
      x-speakeasy-group: PublisherToken
      parameters:
        - name: publisher_id
          in: path
          required: true
          description: publisher id
          schema:
            type: integer
            format: int32
            example: 1
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    x-speakeasy-entity: PublisherToken
                    type: object
                    properties:
                      token:
                        type: string
                    required:
                      - token
                  status:
                    type: string
                    x-speakeasy-terraform-ignore: true
                    enum:
                      - success
                      - not found
                required:
                  - data
                  - status
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
  /infrastructure/publishers/{publisher_id}/apps:
    x-netskope-params:
      serviceConfig: provisioner-pycore-ws
      version: 2
      customerFacing: true
      apiGroup: npa_publishers
    get:
      summary: Get all private apps associated to a publisher
      description: Get all private apps associated to a publisher
      operationId: getNPAPublisherApps
      x-speakeasy-name-override: list_objects
      x-speakeasy-entity-operation: NPAPublishersAppsList#read
      x-speakeasy-group: NPAPublishersApps
      parameters:
        - name: publisher_id
          in: path
          required: true
          description: publisher id
          schema:
            type: integer
            format: int32
            example: 1
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publisher_apps_list_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
  /infrastructure/publishers/bulk:
    x-netskope-params:
      serviceConfig: provisioner-pycore-ws
      version: 2
      customerFacing: true
      apiGroup: npa_publishers
    put:
      summary: Trigger bulk publisher update action
      description: Trigger bulk publisher update action
      operationId: triggerNPAPublisherUpdate
      x-speakeasy-entity-operation: NPAPublishersBulkUpgrade#create
      parameters:
        - name: silent
          in: query
          required: false
          x-speakeasy-ignore: true
          description: flag to skip output except status code
          schema:
            type: string
            enum:
              - "1"
              - "0"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/publisher_bulk_request"
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_bulk_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
  /infrastructure/publishers/releases:
    x-netskope-params:
      serviceConfig: provisioner-pycore-ws
      version: 2
      customerFacing: true
      apiGroup: npa_publishers
    get:
      summary: Get list of publisher release objects
      description: Get list of publisher release objects
      operationId: getNPAPublisherObjects
      x-speakeasy-name-override: list_objects
      x-speakeasy-entity-operation: NPAPublishersReleasesList#read
      x-speakeasy-group: NPAPublishersReleases
      parameters:
        - name: fields
          in: query
          required: false
          description: Return values only from specified fields
          schema:
            type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_release_get_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
  /infrastructure/publishers/alertsconfiguration:
    x-netskope-params:
      serviceConfig: provisioner-pycore-ws
      version: 2
      customerFacing: true
      apiGroup: npa_publishers
    get:
      summary: Get list of publisher alerts
      description: Get list of publisher alerts
      operationId: getNPAPublisherAlerts
      x-speakeasy-entity-operation: NPAPublishersAlertsConfigurationList#get
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_alert_get_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"
    put:
      summary: Configure publisher alerts
      description: Configure publisher alerts
      operationId: configureNPAPublisherAlerts
      x-speakeasy-entity-operation: NPAPublishersAlertsConfigurationUpdate#create,update
      parameters:
        - name: silent
          in: query
          x-speakeasy-ignore: true
          required: false
          description: "flag to skip output except status code: \n * `1` - Skip response data \n * `0` - Do not skip response data"
          schema:
            type: string
            enum:
              - "1"
              - "0"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/publishers_alert_put_request"
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_alert_get_response"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/publishers_response_400"