components:
  schemas:
    domainfronting:
      properties:
        create_by:
          description: user who created
          example: automation@sample.com
          type: string
        create_time:
          description: UTC time conform ISO 8601
          example: "2022-12-14T06:08:04.123Z"
          type: string
        description:
          example: my domain fronting description
          type: string
        lists:
          description: list ID
          example:
            - "123"
            - "11"
          items:
            type: string
          type: array
        modify_by:
          description: user who modified lastly
          example: superman@sample.com
          type: string
        modify_time:
          description: UTC time conform ISO 8601
          example: "2022-12-30T01:05:00.222Z"
          type: string
        name:
          example: my-exception
          type: string
        status:
          description: status of urilist
          enum:
            - applied
            - pending
          type: string
      type: object
    domainfronting-post:
      properties:
        description:
          example: my domain fronting description
          type: string
        lists:
          description: list ID
          example:
            - "199"
            - "1978"
          items:
            type: string
          type: array
        name:
          example: my-exception
          type: string
      type: object
    domainfrontings:
      properties:
        elements:
          example:
            - create_by: automation@sample.com
              create_time: "2022-12-14T06:08:04.123Z"
              description: my domain fronting setup 1
              lists:
                - "123"
                - "11"
              modify_by: superman@sample.com
              modify_time: "2022-12-30T01:05:00.222Z"
              name: my-exception
              status: applied
            - create_by: automation-2@sample.com
              create_time: "2022-02-14T06:08:04.123Z"
              description: my domain fronting setup 2
              lists:
                - "123"
                - "11"
              modify_by: superman@sample.com
              modify_time: "2022-02-30T01:05:00.222Z"
              name: my-exception-2
              status: applied
          items:
            $ref: "#/components/schemas/domainfronting"
          type: array
      type: object
    error-response-500:
      properties:
        datetime:
          description: the time error occured
          example: "2022-08-31T11:14:23.187Z"
          type: string
        err_code:
          description: unique error code for troubleshooting {service}{category}{detail}
          example: "701"
          type: string
        message:
          description: human readable error message, could be general or specific
          example: database query error / internal error
          type: string
        trace_id:
          description: trace id for troubleshooting {service}{category}{detail}
          example: bsbg4m9ru4bb3qstvkl0
          type: string
      type: object
    successful-delete-response:
      properties:
        status:
          description: successful operation
          example: success
          type: string
      type: object
info:
  description:
    "Domain fronting configuration API service provides the API endpoint
    for CRUD operations on Domain fronting resource

    "
  title: "Domain fronting configuration API service.

    "
  version: 0.0.1
openapi: 3.0.3
paths:
  /policy/domainfrontings:
    get:
      parameters:
        - description:
            offset of the first item in the list to retrieve, from the beginning
            if omit
          explode: false
          in: query
          name: offset
          required: false
          schema:
            default: 0
            type: number
          style: form
        - description: number of items
          explode: false
          in: query
          name: limit
          required: false
          schema:
            default: 10
            type: number
          style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/domainfrontings"
          description: successful operation
        "403":
          description:
            This is a licensed feature, please contact Netskope support
            for enablement
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error-response-500"
          description: Error occurrance
      summary: Get Domain Fronting exceptions
      tags:
        - domain-fronting
    post:
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/domainfronting-post"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/domainfronting"
          description: successful operation
        "400":
          description: Invalid request value
        "403":
          description:
            This is a licensed feature, please contact Netskope support
            for enablement
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error-response-500"
          description: Error occurrance
      summary: Create Domain Fronting Exception
      tags:
        - domain-fronting
    x-netskope-params:
      apiGroup: domain_fronting
      customerFacing: true
      serviceConfig: swg-api-service
      version: 2
  /policy/domainfrontings/{id}:
    delete:
      parameters:
        - description: ID of domain fronting
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
          style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/successful-delete-response"
          description: successful operation
        "403":
          description:
            This is a licensed feature, please contact Netskope support
            for enablement
        "404":
          description: given ID is not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error-response-500"
          description: Error occurrance
      summary: Delete Domain Fronting exception configuration by ID
      tags:
        - domain-fronting
    get:
      parameters:
        - description: ID of the domain fronting
          example: "9"
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
          style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/domainfronting"
          description: successful operation
        "400":
          description: given ID is not number
        "403":
          description:
            This is a licensed feature, please contact Netskope support
            for enablement
        "404":
          description: given name is not found
        "500":
          description: Errors occur in service
      summary: Get Domain Fronting exceptions by ID
      tags:
        - domain-fronting
    patch:
      parameters:
        - description: single resource ID
          example: "123"
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
          style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/domainfronting-post"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/domainfronting"
          description: successful operation
        "403":
          description:
            This is a licensed feature, please contact Netskope support
            for enablement
        "404":
          description: given ID is not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error-response-500"
          description: Error occurrance
      summary: Update Domain Fronting exceptions
      tags:
        - domain-fronting
    x-netskope-params:
      apiGroup: domain_fronting
      customerFacing: true
      serviceConfig: swg-api-service
      version: 2
servers:
  - description: Development server
    url: http://localhost:3000/api/v2
tags:
  - description: Domain Fronting exception lists
    name: domain-fronting
